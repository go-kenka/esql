package schema

import (
	. "github.com/go-kenka/esql/dsl"
)

var _ = Table("user",
	Desc("用户表"),
	Fields(
		Field("id",
			Tag("db:\"id\""),
			TypeInfo(TypeInt),
			Unique(true),
			Nillable(false),
			Default(0),
			Comment("ID"),
		),
		Field("username",
			Tag("db:\"username\""),
			TypeInfo(TypeString),
			Unique(true),
			Nillable(false),
			Default(0),
			Comment("用户账号"),
		),
		Field("nike_name",
			Tag("db:\"nike_name\""),
			TypeInfo(TypeString),
			Unique(false),
			Nillable(false),
			Default([]string{"aaa"}),
			Comment("用户名称"),
		),
		Field("role_id",
			Tag("db:\"role_id\""),
			TypeInfo(TypeInt),
			Unique(false),
			Nillable(false),
			Default([]string{"aaa"}),
			Comment("角色ID"),
		),
	),
	Edges(
		Edge("用户与角色关系",
			Link("role_id"),
			From("role"),
			Ref("id"),
			EType(TypeM2O),
			Display(
				Field("role_name",
					Tag("db:\"role_name\""),
					TypeInfo(TypeString),
				),
			),
		),
	),
)
